{{template "header" .}}

<div class="app-container">
  <main class="main-content">
    <div id="error-message" class="error-message hidden"></div>

    <div class="teams-container">
      <div class="teams-header">
        <h2 class="todos-title">Team Management</h2>
        <div class="teams-actions">
          <button class="btn btn-primary" onclick="showCreateTeamModal()">
            <i class="fas fa-plus"></i>
            <span>Create Team</span>
          </button>
          <button class="btn btn-secondary" onclick="showJoinTeamModal()">
            <i class="fas fa-user-plus"></i>
            <span>Join Team</span>
          </button>
        </div>
      </div>

      <div class="teams-list" id="teamsList">
        {{range .teams}}
        <div class="team-card" data-team-id="{{.ID}}">
          <div class="team-info">
            <h3>{{.Name}}</h3>
            <p class="team-code">Team Code: {{.Code}}</p>
          </div>
          <div class="team-actions">
            <button class="btn btn-primary" onclick="viewTeam({{.ID}})">
              <i class="fas fa-eye"></i>
              <span>View Team</span>
            </button>
            <button class="btn btn-danger" onclick="deleteTeam({{.ID}})">
              <i class="fas fa-trash"></i>
              <span>Delete Team</span>
            </button>
          </div>
        </div>
        {{end}}
      </div>
    </div>
  </main>
</div>

<!-- Create Team Modal -->
<div class="modal" id="createTeamModal">
  <div class="modal-content">
    <div class="modal-header">
      <h3>Create New Team</h3>
      <button class="close-btn" onclick="closeCreateTeamModal()">
        <i class="fas fa-times"></i>
      </button>
    </div>
    <div class="modal-body">
      <form id="createTeamForm" class="todo-form">
        <div class="form-group">
          <label for="teamName">Team Name</label>
          <div class="input-with-icon">
            <i class="fas fa-users"></i>
            <input
              type="text"
              id="teamName"
              name="teamName"
              required
              minlength="3"
              maxlength="50"
              placeholder="Enter team name"
            />
          </div>
        </div>
        <button type="submit" class="add-todo-btn">
          <i class="fas fa-plus"></i>
          <span>Create Team</span>
        </button>
      </form>
    </div>
  </div>
</div>

<!-- Join Team Modal -->
<div class="modal" id="joinTeamModal">
  <div class="modal-content">
    <div class="modal-header">
      <h3>Join Team</h3>
      <button class="close-btn" onclick="closeJoinTeamModal()">
        <i class="fas fa-times"></i>
      </button>
    </div>
    <div class="modal-body">
      <form id="joinTeamForm" class="todo-form">
        <div class="form-group">
          <label for="teamCode">Team Code</label>
          <div class="input-with-icon">
            <i class="fas fa-key"></i>
            <input
              type="text"
              id="teamCode"
              name="teamCode"
              required
              minlength="6"
              maxlength="6"
              placeholder="Enter team code"
            />
          </div>
        </div>
        <button type="submit" class="add-todo-btn">
          <i class="fas fa-user-plus"></i>
          <span>Join Team</span>
        </button>
      </form>
    </div>
  </div>
</div>

<!-- Team Todos Modal -->
<div class="modal" id="teamTodosModal">
  <div class="modal-content modal-lg">
    <div class="modal-header">
      <h3>Team Tasks</h3>
      <button class="close-btn" onclick="closeTeamTodosModal()">
        <i class="fas fa-times"></i>
      </button>
    </div>
    <div class="modal-body">
      <form id="createTeamTodoForm" class="todo-form">
        <div class="form-group">
          <label for="todoTitle">Task Title</label>
          <div class="input-with-icon">
            <i class="fas fa-pencil-alt"></i>
            <input
              type="text"
              id="todoTitle"
              name="todoTitle"
              required
              minlength="3"
              maxlength="100"
              placeholder="What needs to be done?"
            />
          </div>
        </div>
        <div class="form-group">
          <label for="todoDescription">Description</label>
          <div class="input-with-icon">
            <i class="fas fa-align-left"></i>
            <textarea
              id="todoDescription"
              name="todoDescription"
              rows="3"
              placeholder="Add a description (optional)"
              class="todo-description"
            ></textarea>
          </div>
        </div>
        <button type="submit" class="add-todo-btn">
          <i class="fas fa-plus"></i>
          <span>Add Task</span>
        </button>
      </form>

      <div class="todos-container">
        <h2 class="todos-title">Team Tasks</h2>
        <div class="todos-list" id="teamTodosList">
          <!-- Team todos will be dynamically added here -->
        </div>
      </div>
    </div>
  </div>
</div>

<script src="/static/teams.js"></script>

{{template "footer" .}}
