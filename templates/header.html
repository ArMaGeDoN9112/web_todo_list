{{define "header"}}
<!DOCTYPE html>
<html lang="en" data-theme="light">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{{.title}}</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
    <link rel="stylesheet" href="/static/style.css" />
  </head>
  <body>
    <nav class="navbar">
      <div class="nav-brand">
        <i class="fas fa-tasks"></i>
        <h1>Todo List</h1>
      </div>
      <div class="nav-actions">
        <button
          class="theme-toggle"
          id="theme-toggle"
          aria-label="Toggle theme"
        >
          <i class="fas fa-moon"></i>
        </button>
        <a href="/todos" class="profile-link">
          <i class="fas fa-list-check"></i>
          <span>My Todos</span>
        </a>
        <a href="/teams" class="profile-link">
          <i class="fas fa-users"></i>
          <span>Team Todos</span>
        </a>
        <a href="/profile" class="profile-link">
          <i class="fas fa-user"></i>
          <span>Profile</span>
        </a>
        <button class="logout-btn" onclick="logout()">
          <i class="fas fa-sign-out-alt"></i>
          <span>Logout</span>
        </button>
      </div>
    </nav>

    <script>
      // Theme toggle functionality
      const themeToggle = document.getElementById("theme-toggle");
      const html = document.documentElement;
      const themeIcon = themeToggle.querySelector("i");

      // Check for saved theme preference
      const savedTheme = localStorage.getItem("theme") || "light";
      html.setAttribute("data-theme", savedTheme);
      updateThemeIcon(savedTheme);

      themeToggle.addEventListener("click", () => {
        const currentTheme = html.getAttribute("data-theme");
        const newTheme = currentTheme === "light" ? "dark" : "light";

        html.setAttribute("data-theme", newTheme);
        localStorage.setItem("theme", newTheme);
        updateThemeIcon(newTheme);
      });

      function updateThemeIcon(theme) {
        themeIcon.className = theme === "light" ? "fas fa-moon" : "fas fa-sun";
      }

      // Logout functionality
      function logout() {
        fetch("/api/logout", {
          method: "POST",
          credentials: "include",
        }).then(() => {
          window.location.href = "/login";
        });
      }
    </script>
  </body>
</html>
{{end}}
