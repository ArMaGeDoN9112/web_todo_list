{{template "header" .}}

<div class="app-container">
  <main class="main-content">
    <div class="auth-container">
      <div class="auth-card">
        <div class="auth-header">
          <h2>Profile</h2>
          <p class="auth-subtitle">Manage your account settings</p>
        </div>

        <div id="error-message" class="error-message hidden"></div>

        <div class="profile-info">
          <div class="form-group">
            <label for="username">Username</label>
            <div class="input-with-icon">
              <i class="fas fa-user"></i>
              <input type="text" id="username" readonly class="readonly" />
            </div>
          </div>

          <div class="form-group">
            <label for="email">Email</label>
            <div class="input-with-icon">
              <i class="fas fa-envelope"></i>
              <input type="email" id="email" readonly class="readonly" />
            </div>
          </div>
        </div>
  </main>
</div>

<script>
  // Load profile data
  document.addEventListener("DOMContentLoaded", async () => {
    try {
      const response = await fetch("/api/profile");
      if (!response.ok) throw new Error("Failed to load profile");

      const profile = await response.json();
      document.getElementById("username").value = profile.username;
      document.getElementById("email").value = profile.email;
    } catch (error) {
      const errorDiv = document.getElementById("error-message");
      errorDiv.textContent = error.message;
      errorDiv.classList.remove("hidden");
    }
  });

 
  // Toggle password visibility for all password fields
  document.querySelectorAll(".password-toggle").forEach((toggle) => {
    toggle.addEventListener("click", function () {
      const passwordInput = this.parentElement.querySelector("input");
      const icon = this.querySelector("i");

      if (passwordInput.type === "password") {
        passwordInput.type = "text";
        icon.classList.remove("fa-eye");
        icon.classList.add("fa-eye-slash");
      } else {
        passwordInput.type = "password";
        icon.classList.remove("fa-eye-slash");
        icon.classList.add("fa-eye");
      }
    });
  });
</script>

{{template "footer" .}}
